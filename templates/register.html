{% load static %}



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>–Ñ–¥–æ–≤—ñ–¥–Ω–∏–∫</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
   $(document).ready(function () {
    var isFormValid = true; // –ó–º—ñ–Ω–Ω–∞ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ñ–æ—Ä–º–∏

    $('input').focus(function () {
        $(this).css('background-color', '#cccccc');
    }).blur(function () {
        $(this).css('background-color', '#ffffff');
    });

    $('button.smallbtn').click(function () {
        $(this).toggleClass('active');
    });

    $('#registration-form button[type="submit"]').click(function (e) {
        e.preventDefault(); // –ó–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Ñ–æ—Ä–º–∏
        isFormValid = validateAndSubmitForm('registration-form');
        if (isFormValid) {
            $('#registration-form').submit(); // –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ —Ñ–æ—Ä–º—É —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó, —è–∫—â–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–æ–π—à–ª–∞ —É—Å–ø—ñ—à–Ω–æ
        }
    });

    $('.login button[type="submit"]').click(function (e) {
        // –û–±—Ä–æ–±–∏—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Ñ–æ—Ä–º–∏ –≤—Ö–æ–¥—É —Ç—É—Ç, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
    });
});

function validateAndSubmitForm(formId) {
    resetErrors(); // –°–∫–∏–Ω—É—Ç–∏ —Å—Ç–∞–Ω –ø–æ–º–∏–ª–æ–∫ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ—é –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é

    if (validateForm(formId)) {
        return true; // –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ true –¥–ª—è –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
    }
    return false; // –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ false –¥–ª—è –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è –Ω–µ–≤–¥–∞–ª–æ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
}

function resetErrors() {
    // –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏
    $('.error-message').remove();
}

function validateForm(formId) {
    var form = $('#' + formId);
    var password = form.find('input[type="password"]').val();
    var confirmPassword = form.find('input[name="confirmPassword"]').val();
    var login = form.find('input[name="login"]').val();
    var email = form.find('input[name="email"]').val();
    

    if (password !== confirmPassword) {
        displayErrorMessage('–ü–∞—Ä–æ–ª—ñ –Ω–µ —Å–ø—ñ–≤–ø–∞–¥–∞—é—Ç—å.');
        return false;
    }
     if (login.trim() === "") {
        displayErrorMessage('–ü–æ–ª–µ "–õ–æ–≥—ñ–Ω" –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º.');
        return false;
    }


    if (!isValidEmail(email)) {
        displayErrorMessage('–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—É –∞–¥—Ä–µ—Å—É –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ—ó –ø–æ—à—Ç–∏.');
        return false;
    }

    if (!isValidPassword(password)) {
        displayErrorMessage('–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ –Ω–µ –º–µ–Ω—à–µ 8 —Å–∏–º–≤–æ–ª—ñ–≤, –ª—ñ—Ç–µ—Ä–∏ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ —ñ –Ω–∏–∂–Ω—å–æ–≥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É, –∞ —Ç–∞–∫–æ–∂ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π —Å–∏–º–≤–æ–ª.');
        return false;
    }

    return true;
}

function displayErrorMessage(message) {
    // –í–∏–≤–µ—Å—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É
    alert(message);
}

function isValidEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

function isValidPassword(password) {
    // –ü–∞—Ç—Ç–µ—Ä–Ω –ø–∞—Ä–æ–ª—è –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
    var passwordPattern = /^(?=.*[a-zA-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
    return passwordPattern.test(password);
}

function togglePasswordVisibility(id) {
    var passwordInput = document.getElementById(id);
    var passwordButton = document.querySelector(`button[data-toggle="${id}"]`);
    if (passwordInput.type === "password") {
        passwordInput.type = "text";
        passwordButton.textContent = "üëÅÔ∏è";
    } else {
        passwordInput.type = "password";
        passwordButton.textContent = "üëÅ";
    }
}

        </script>
        
    
    <style>
        /* –í–∞—à CSS –∫–æ–¥ */

        /* –î–æ–¥–∞—Ç–∫–æ–≤–∏–π CSS –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ü–æ–∫–∞–∑–∞—Ç–∏ –ø–∞—Ä–æ–ª—å" */
        .password-field {
            position: relative;
        }

       

        .password-field button {
            position: absolute;
            right: 0;
            top: 35%;
            left: 135px;
            transform: translateY(-50%);
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 20px;
        }
    </style>
</head>
<body class="logform">
    <main>
        
        <form class="inputform" action="/register/" method="post" id="registration-form">
            {% csrf_token %}

            <a href="/login"style="  border-radius: 100px;
            border: 1px solid #000;
            background: #f0f0f0;  text-align: center; color:#000" class="smallbtn">–í—Ö—ñ–¥</a>
            <a href="/register" style="  border-radius: 100px;
            border: 1px solid #000;
            background: #f0f0f0;  text-align: center; color:#000"class="smallbtn">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</a>

            <div class="registration">
                <label>–õ–æ–≥—ñ–Ω</label>
                <input type="text" name="login">
                <label>–ü–∞—Ä–æ–ª—å</label>
                <div class="password-field">
                    <input type="password" id="registrationPassword" name="password">
                    <button type="button" data-toggle="registrationPassword" onclick="togglePasswordVisibility('registrationPassword')">üëÅ</button>
                </div>
                <label>–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å</label>
                <div class="password-field">
                    <input type="password" id="confirmPassword" name="confirmPassword">
                    <button type="button" data-toggle="confirmPassword" onclick="togglePasswordVisibility('confirmPassword')">üëÅ</button>
                </div>
                <label>–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –∞–¥—Ä–µ—Å–∞</label>
                <input type="text" name="email">
                
                <button class="bigbtn" type="submit">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
            </div>
        </form>
    </main>
</body>
</html>